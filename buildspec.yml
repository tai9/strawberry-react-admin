version: 0.2

phases:
    install:
        # runtime-versions:
        #     node: 14
        commands:
            # - echo node version checking...
            # - node -v
            # - npm -v
            - echo Install Node 12...
            - curl -sL https://deb.nodesource.com/setup_12.x | bash -
            - apt install -y nodejs
            - echo Install Yarn...
            - curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add -
            - echo "deb https://dl.yarnpkg.com/debian/ stable main" | tee /etc/apt/sources.list.d/yarn.list
            - apt install --no-install-recommends yarn
    pre_build:
        commands:
            - echo Install Dependencies
            # - npm install
            - yarn
    build:
        commands:
            - echo Testing...
            - yarn test
            - echo Building...
            # - npm run build
            - yarn build
artifacts:
    files:
        - '**/*'
    discard-paths: no
    base-directory: dist
